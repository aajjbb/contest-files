#include <bits/stdc++.h>

using namespace std;

const int MAXN = 115;

int T, N, M;
string S;

int main() {
  cin >> T;

  for (int t = 1; t <= T; t++) {
    cin >> N >> M;
    
    bitset<MAXN> bi[N + 1];

    for (int i = 1; i <= N; i++) {
      bi[i].reset();
    }
    getline(cin, S);
    for (int i = 0; i < M; i++) {
      getline(cin, S);
      int a = -1, b = -1, c = -1;
      sscanf(S.c_str(), "%d%d%d", &a, &b, &c);
      
      a -= 1;
      b -= 1;
      c -= 1;

      if (a >= 0) {
	bi[a].set(i);
      }
      if (b >= 0) {
	bi[b].set(i);
      }
      if (c >= 0) {
	bi[c].set(i);
      }
    }

    bool ans = false;

    for (int i = 0; i < (1 << N); i++) {
      bitset<MAXN> blu;
      bitset<MAXN> red;

      for (int j = 0; j < N; j++) {
	if (i & (1 << j)) {
	  blu |= bi[j];
	} else {
	  red |= bi[j];
	}
      }
      if (blu.count() == red.count() && blu.count() == M) {
	ans = true;
	break;
      }
    }
    if (ans) {
      cout << "Y";
    } else {
      cout << "N";
    }
  }
  cout << "\n";
  return 0;
}
